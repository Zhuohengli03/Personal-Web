---
import BaseLayout from '../../layouts/BaseLayout.astro';
import MomentsPost from '../../components/magic/MomentsPost.astro';
import fs from 'fs';
import path from 'path';

const base = import.meta.env.BASE_URL;
const img = (name: string) => `${base}education/nyu/${name}`;

const imageExtensions = new Set(['.jpg', '.jpeg', '.png', '.webp', '.gif']);
const dir = path.join(process.cwd(), 'public', 'education', 'nyu');
let imageFiles: string[] = [];
try {
  const files = fs.readdirSync(dir);
  imageFiles = files
    .filter((f) => imageExtensions.has(path.extname(f).toLowerCase()) && !f.startsWith('.'))
    .sort();
} catch {
  // 目录不存在或无法读取
}
---
<BaseLayout title="纽约大学 | 李卓衡" description="NYU - Master of Management & Analytics">
  <div class="edu-feed">
    <p class="feed-back"><a href="#" role="button" data-back>← <span data-i18n="navBack">返回上一页</span></a></p>

    <MomentsPost
      titleZh="纽约大学"
      titleEn="New York University"
      subtitleZh="管理与管理分析硕士（商业分析）· 2025.09 – 2026.12（预计）· GPA 3.83/4.00"
      subtitleEn="M.S. in Management & Analytics (Business Analytics) · 2025.09 – 2026.12 (Expected) · GPA 3.83/4.00"
    >
      <div class="content-zh">
        <p>此处可填写纽约大学就读经历、校园生活、课程与项目等。可增加多段：复制下面一行再改内容。</p>
        <p>第二段示例：如核心课程、数据工程/分析相关项目、与导师或同学合作经历等。</p>
      </div>
      <div class="content-en">
        <p>Add your NYU experience, campus life, courses and projects here. Add more paragraphs by copying a line below.</p>
        <p>Second paragraph example: e.g. core courses, data engineering/analytics projects, collaboration with faculty or peers.</p>
      </div>
      <!-- 图片：把图片放到 public/education/nyu/ 即可，构建时自动扫描并按文件名排序展示 -->
      <div slot="images">
        {imageFiles.map((filename) => (
          <img src={img(filename)} alt="" />
        ))}
      </div>
    </MomentsPost>
  </div>

  <p class="page-footer"><a href="#" role="button" data-back>← <span data-i18n="navBack">返回上一页</span></a></p>
</BaseLayout>

<style>
  .edu-feed {
    max-width: 520px;
    margin: 0 auto;
  }
  .feed-back {
    font-size: 0.9rem;
    color: var(--muted);
    margin: 0 0 1rem;
  }
  .feed-back a { color: var(--accent); }
  .page-footer { margin-top: 2rem; font-size: 0.9rem; color: var(--muted); }
</style>
